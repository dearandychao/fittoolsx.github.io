<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Shopee 授權中繼頁</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; padding: 50px; text-align: center; background-color: #f5f5f5;}
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto;}
        h2 { color: #ee4d2d; }
        input { font-size: 24px; padding: 10px; width: 80%; margin: 20px 0; text-align: center; border: 2px solid #ddd; border-radius: 5px;}
        button { font-size: 18px; padding: 10px 30px; cursor: pointer; background-color: #ee4d2d; color: white; border: none; border-radius: 5px;}
        button:hover { background-color: #d73211; }
        .note { color: #666; margin-top: 20px; font-size: 14px;}
    </style>
</head>
<body>
    <div class="container">
        <h2>Shopee 授權成功</h2>
        <p>請點擊下方按鈕複製 Code，並回到 ERP 程式貼上：</p>
        
        <input type="text" id="authCode" value="讀取中..." readonly onclick="this.select()">
        <br>
        <button onclick="copyCode()">複製 Code</button>
        
        <p class="note" id="shopIdDisplay"></p>
        <p class="note">您可以關閉此視窗了</p>
    </div>

    <script>
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        window.onload = function() {
            const code = getQueryParam('code');
            const shopId = getQueryParam('shop_id');
            const codeInput = document.getElementById('authCode');
            const shopDisplay = document.getElementById('shopIdDisplay');

            if (code) {
                codeInput.value = code;
                shopDisplay.innerText = "Shop ID: " + shopId;
            } else {
                codeInput.value = "無 Code";
                shopDisplay.innerText = "網址中沒有偵測到 code 參數";
                shopDisplay.style.color = "red";
            }
        };

        function copyCode() {
            const copyText = document.getElementById("authCode");
            copyText.select();
            copyText.setSelectionRange(0, 99999); 
            navigator.clipboard.writeText(copyText.value);
            alert("已複製！");
        }
    </script>
</body>
</html>
